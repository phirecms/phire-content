/**
 * jax calendar module
 *
 * @link       https://github.com/jaxjs/jax-calendar
 * @category   jax-calendar
 * @author     Nick Sagona, III <dev@nolainteractive.com>
 * @copyright  Copyright (c) 2009-2016 NOLA Interactive, LLC. (http://www.nolainteractive.com)
 * @license    http://www.jaxjs.org/license     New BSD License
 * @version    1.0
 *
 *     Example: jax.calendar('#date_field');
 *
 */
jax.extend({calendarFormat:"m/d/yyyy",calendarMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],calendarDays:["S","M","T","W","T","F","S"],calendar:function(e,t,n,r){n!=undefined&&n!=null&&n.constructor==Array&&n.length==12&&(this.calendarMonths=n),r!=undefined&&r!=null&&r.constructor==Array&&r.length==7&&(this.calendarDays=r),t!=undefined&&t!=null&&(this.calendarFormat=t);var i=this,s=e,o=this.calendarFormat;this[0].nodeName=="A"?window.jax(this[0]).click(function(){return window.jax("#calendar")[0]!=undefined?window.jax("#calendar").remove():i.buildCalendar(i.parent(),s,o),!1}):window.jax(this[0]).focus(function(){window.jax("#calendar")[0]==undefined&&i.buildCalendar(i.parent(),s,o)})},buildCalendar:function(e,t,n){if(window.jax(t).val()!="")var r=new Date(window.jax(t).val()),i=r.getDate();else var r=new Date,i=null;return window.jax(e).append("div",{id:"calendar"}),window.jax("#calendar").append("a",{id:"calendar-close",href:"#","class":"calendar-close-link"},"x"),window.jax("#calendar").append("h5",{id:"calendar-header","data-field":t,"data-format":n,"data-value":r.getMonth()+"-"+r.getFullYear()},'<a href="#" id="prev-month" class="calendar-nav-link" onclick="jax().prevMonth(); return false;">&lt;</a><span id="calendar-header-span">'+window.jax().calendarMonths[r.getMonth()]+" "+r.getFullYear()+'</span><a id="next-month" href="#" class="calendar-nav-link" onclick="jax().nextMonth(); return false;">&gt;</a>'),window.jax("#calendar-close").click(function(){return window.jax("#calendar").remove(),!1}),window.jax().buildMonth(r.getMonth()+"-"+r.getFullYear(),i),!1},nextMonth:function(){var e=window.jax("#calendar-header").data("value"),t=e.split("-");if(t[0]==11)var n=0,r=parseInt(t[1])+1;else var n=parseInt(t[0])+1,r=t[1];window.jax("#calendar-header").data("value",n+"-"+r),window.jax("#calendar-header-span").val(window.jax().calendarMonths[n]+" "+r),window.jax().buildMonth(n+"-"+r)},prevMonth:function(){var e=window.jax("#calendar-header").data("value"),t=e.split("-");if(t[0]==0)var n=11,r=parseInt(t[1])-1;else var n=parseInt(t[0])-1,r=t[1];window.jax("#calendar-header").data("value",n+"-"+r),window.jax("#calendar-header-span").val(window.jax().calendarMonths[n]+" "+r),window.jax().buildMonth(n+"-"+r)},buildMonth:function(e,t){var n=e.split("-"),r=parseInt(n[0]),i=parseInt(n[1]);window.jax("#calendar-table")[0]!=undefined&&window.jax("#calendar-table").remove(),window.jax("#calendar").append("table",{id:"calendar-table",cellpadding:0,cellspacing:0}),window.jax("#calendar-table").append("tr",{id:"calendar-table-header"});for(var s=0;s<window.jax().calendarDays.length;s++)window.jax("#calendar-table-header").append("th",null,window.jax().calendarDays[s]);var o=(new Date(i,r+1,0)).getDate(),u=new Date(i,r,1),a=Math.ceil((u.getDay()+o)/7),f=1;for(var s=0;s<a;s++){window.jax("#calendar-table").append("tr",{id:"calendar-table-row-"+(s+1)});for(var l=0;l<7;l++)s==0?l>=u.getDay()?(curDateValue=r+1+"/"+f+"/"+i,curClass=t!=null&&t==f?' class="day-on"':"",window.jax("#calendar-table-row-"+(s+1)).append("td",null,'<a href="" onclick="window.jax().setDateValue(\''+curDateValue+"'); return false;\""+curClass+">"+f+"</a>"),f++):window.jax("#calendar-table-row-"+(s+1)).append("td",null,"&nbsp;"):f<=o?(curDateValue=r+1+"/"+f+"/"+i,curClass=t!=null&&t==f?' class="day-on"':"",window.jax("#calendar-table-row-"+(s+1)).append("td",null,'<a href="" onclick="window.jax().setDateValue(\''+curDateValue+"'); return false;\""+curClass+">"+f+"</a>"),f++):window.jax("#calendar-table-row-"+(s+1)).append("td",null,"&nbsp;")}},setDateValue:function(e){var t=window.jax("#calendar-header").data("format").toLowerCase(),n=e.split("/"),r=n[0],i=n[1],s=n[2];switch(t){case"mm/dd/yyyy":case"mm/dd/yy":case"m/d/yyyy":case"m/d/yy":case"m/d/y":e=r+"/"+i+"/"+s;break;case"mm-dd-yyyy":case"mm-dd-yy":case"m-d-yyyy":case"m-d-yy":case"m-d-y":e=r+"-"+i+"-"+s;break;case"yyyy/mm/dd":case"yy/mm/dd":case"yyyy/m/d":case"yy/m/d":case"y/m/d":e=s+"/"+r+"/"+i;break;case"yyyy-mm-dd":case"yy-mm-dd":case"yyyy-m-d":case"yy-m-d":case"y-m-d":e=s+"-"+r+"-"+i;break;case"dd/mm/yyyy":case"dd/mm/yy":case"d/m/yyyy":case"d/m/yy":case"d/m/y":e=i+"/"+r+"/"+s;break;case"dd-mm-yyyy":case"dd-mm-yy":case"d-m-yyyy":case"d-m-yy":case"d-m-y":e=i+"-"+r+"-"+s}window.jax(window.jax("#calendar-header").data("field")).val(e),window.jax("#calendar").remove()}});
